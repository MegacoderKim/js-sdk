<div class="timeline-container flex-column align-center" [style.marginTop.px]="20">
  <div class="placeline-header">
    <div> Placeline</div>
  </div>
  <div class="segment-list-container flex-column">
    <div [id]="segment.id" [class.hightlight-segment]="segment.id == highlightSegmentId" class="segment-container" *ngFor="let segment of segmentDisplay(); trackBy: trackSegment; let even=even; let last=last; let index=index;let first=first">
      <div class="segment" (mouseleave)="onMouseOut()" (mouseenter)="onMouseOver(segment.id)" [ngClass]="segment.display.className" [style.height.px]="segment.calculated.pixelDuration || 130">
        <div class="pipe">
          <div class="markers" [ngClass]="(first ? 'first' : '')">
            <div class="marker" *ngFor="let marker of segment.display.markers; trackBy: trackMarker; let even=even; let first=first;let last=last; let index=index;" [ngClass]="getMarkerUIClass(marker)" (mouseenter)="onMarkerMouseEnter(marker.id)" (mouseleave)="onMarkerMouseLeave()">
              <div class="events" *ngIf="marker.events.length > 0">
                <div class="event" *ngFor="let event of marker.events; trackBy: trackEvent; let even=even; let first=first;let last=last; let index=index;" id={{event.id}}>
                  <div class="event-divider" *ngIf="!first"></div>
                  <div class="recorded-time">{{event.display.recordedAt}}</div>
                  <div class="event-text">{{event.display.text}}</div>
                  <div class="event-subtext">{{event.display.subtext}}</div>
                </div>
              </div>
              <div class="actions" *ngIf="marker.actions.length > 0" [ngClass]="(first ? 'first' : '')">
                <div class="action" [ngClass]="action.displayContent.type" *ngFor="let action of marker.actions; trackBy: trackAction; let even=even; let first=first;let last=last; let index=index;" id={{action.id}} (mouseleave)="unselectAction()" (mouseenter)="selectActionId(action.id)">
                  <div class="action-divider" *ngIf="!first"></div>
                  <div class="recorded-time" *ngIf="action.displayContent.recordedAt">{{action.displayContent.recordedAt}}</div>
                  <div class="action-status-container flex-column">
                    <div class="action_status">{{action.displayContent.text}} </div>
                    <div class="action-status-subtext" *ngIf="action.displayContent.subtext">{{action.displayContent.subtext}}</div>
                  </div>
                  <div class="metadata-container" *ngIf="action.displayContent.orderId && !showActionDetails">
                    <div class="place-name hide" *ngIf="action.displayContent.placeName">{{action.displayContent.placeName}}</div>
                    <div class="place-address hide" *ngIf="action.displayContent.placeAddress">{{action.displayContent.placeAddress}}</div>
                    <div class="place-city hide">
                      <span class="place-cityname">{{action.displayContent.placeCity}}</span>
                      <span class="place-zip">{{action.displayContent.zipCode}}</span>
                    </div>
                    <div class="order-id" *ngIf="action.displayContent.orderId && !showActionDetails" (click)="openLookupIdPage(action.lookup_id)">{{action.displayContent.orderId}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="pipe-start" [ngClass]="index > 0 ? 'hide' : ''"></div>
          <div class="pipe-line"></div>
          <div class="pipe-end" [ngClass]="(!!segment.display.isLast && !segment.ended_at) ? '' : 'hide'">
            <div class="online-circle"></div>
            <div class="online-blink"></div>
          </div>
        </div>
        <div class="data">
          <div class="start" [ngClass]="index > 0 ? 'hide' : ''">
            <span>{{segment.display.startedAt}}</span>
          </div>
          <div class="info">
            <div [tooltip]="stopTooltip" [tooltipDisabled]="segment.type!=='stop' || !getStopAddress(segment, true)" tooltipPlacement="bottom">
              <div class="type-info">{{segment.display.content.type}}</div>
              <tooltip-content #stopTooltip toolTipClass="tooltip-stop-segment" [isWarning]="false" [animation]="true" placement="bottom">
                <div class="flex-column">
                  <div style="color: rgb(71, 61, 61)">{{getStopAddress(segment, true)}}</div>
                </div>
              </tooltip-content>
            </div>
            <div class = "metadata-info"> {{segment.display.content.metadata}} </div>
          </div>
          <div class="end">
            <span>{{segment.display.endedAt}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card" *ngIf="segmentDisplay()?.length == 0 && !loading">
    <div class="card-content">
      <strong>No Placeline</strong>
    </div>
  </div>
</div>
