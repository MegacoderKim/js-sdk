<div class="main-body">
    <div class="pane-container">
      <div class="left-pane">
        <div class="content-main">
          <div class="content-toolbar">
            <div class="content-title">
              <div class="title-content-inner">
                <span> {{state.title}}</span>
              </div>
            </div>
            <div class="content-navigation"  *ngIf="state.showSubStepNavigation">
              <div class="inner">
                <a data-previous="" [ngClass]="hasPrevSubStep() ? '' : 'inactive'" (click)="onPrevSubStep()">
                  <i class="fa fa-fw fa-arrow-left left"></i>
                </a>
              </div>
              <div class="inner">
                <span>
                  <span class="current-index">{{state.subStepIndex + 1}}</span>
                  <span>/</span>
                  <span class="snippet-total">{{state.totalSubSteps}}</span>
                </span>
              </div>
              <div class="inner">
                <a data-next="" [ngClass]="hasNextSubStep() ? '' : 'inactive'" (click)="onNextSubStep()">
                  <i class="fa fa-fw fa-arrow-right right"></i>
                </a>
              </div>
            </div>
          </div>
          <div class="content-doc">
            <div class="doc">
              <div class="step-content markdown-content" [innerHtml]="state.subStepLeftContent | safeHtml"></div>
              <ng-content> </ng-content>
            </div>
            <div class="next-step-button">
              <button type="submit" class="button is-primary" style="margin-right:5px;" (click)="onPreviousStepAction()" *ngIf="hasPrevStepAction()">Previous</button>
              <button type="submit" class="button is-primary" style="margin-right:5px;" (click)="onNextStepAction()" [ngClass]="isNextStepActionDisabled(state.stepIndex, state.subStepIndex) ? 'disabled' : ''" *ngIf="hasNextStepAction()">Next</button>
            </div>
          </div>
        </div>
      </div>
      <div class="right-pane">
        <div class="code-main">
          <div class="code-toolbar">
            <div class="toolbar-filename">
              <div class="toolbar-filename-content">
                <i class="fa fa-file-code-o" aria-hidden="true"></i>
                <a target="_blank" [href]="getStateFileLinkUrl(state)">
                  <span>{{getStateFileName(state)}}</span>
                </a>
              </div>
              <div class="code-additions">{{getStateCodeAdditions(state)}}</div>
            </div>
            <div class="toolbar-languages" *ngIf="showToolbarLanguages(state)">
              <div class="toolbar-language"  *ngFor="let option of state.code.options; let first = first; let index = index" (click)="switchCodeOption(state, option.id)">
                <div class="language-button" [ngClass] = "option.selected ? 'selected' : ''">
                  <span> {{option.label}}</span>
                </div>
              </div>
            </div>
            <div class="toolbar-links" *ngIf="showToolbarLinks(state)">
              <a class="eye-highlight" (click)="toggleBlurCode()" [ngClass]="state.code.blurCode ? 'on' : 'off'">
                <i class="fa fa-fw fa-eye"></i>
              </a>
              <a id="download" class="hide" href="https://github.com/hypertrack/">
                <i class="fa fa-fw fa-download"></i>
              </a>
              <a id="github" class="hide" target="_blank" href="https://github.com/hypertrack">
                <i class="fa fa-fw fa-github-square"></i>
              </a>
              <a id="clippy" href="#copy" class="hide">
                <i class="fa fa-fw fa-copy"></i>
              </a>
            </div>
          </div>
          <div class="code-container" [innerHTML]="state.code.element | safeHtml" *ngIf="showCodeContainer(state)">
          </div>
          <div class="code-arrow-bounce">
            <a class="fa fa-arrow-down fa-2x" href="#"></a>
          </div>
          <div class="img-info-container" *ngIf="showImageContainer(state)">
            <img class="right-pane-image hide" [src]="getImageSrc(state)" />
            <div [style.background-image]="'url(' + getImageSrc(state) + ')'" class="right-pane-image-container">
              <img class="right-pane-image" [src]="getImageSrc(state)" style="visibility: hidden;width: 250px" />
            </div>
          </div>
          <div class="custom-info-container" *ngIf="showCustomInfoContainer(state)">
            <ng-content select="[custom-info-body]"> </ng-content>
          </div>
        </div>
      </div>
    </div>
    <div class="step-detail-footer">
      <div class="footer-content">
        <div class="platform-info-container hide">
          <img *ngIf="platformLogo" [src]="platformLogo" class= "logo" [ngClass]="platform ? platform : ''" />
        </div>
        <div class="step-path-container">
          <div class="step-path" *ngIf="showPlatformPicker" (click)="jumpToPlatformPicker()">
            <div style="left:-50%;right:50%;margin-bottom:8px;" class="step-path-connector hide"></div>
            <div class="step-path-detail">
              <div class="step-path-title">
                Pick Platform
              </div>
              <div class="step-progress">
                <img *ngIf="platformLogo" [src]="platformLogo" class= "platform-logo" [ngClass]="platform ? platform : ''" />
              </div>
            </div>
          </div>
          <div class="step-path" *ngFor="let step of steps; let first = first; let index = index" (click)="onJumpToStep(index, step)" [ngClass] = "(step.subSteps.length) === 0 ? 'disabled' : ''">
            <div style="left:-50%;right:50%;margin-bottom:8px;" class="step-path-connector" *ngIf="showPlatformPicker || !first"></div>
            <div class="step-path-detail" [ngClass]="(index === state.stepIndex) ? 'selected' : ''">
              <div class="step-path-title">
                {{step.label}}
              </div>
              <div class="step-progress">
                <div class="round-full" *ngIf="index >= state.stepIndex"></div>
                <i class="fa fa-check" *ngIf="index < state.stepIndex"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
