<div class="splash">
  <div class="splasher w-container">
    <div class="claim">Build real time tracking of deliveries in Android</div><img sizes="(max-width: 479px) 100vw, 397px" [src]="images.stockPhoto1" width="397">
    <div class="answer tutorial">
      <br>With globalization of Uber, users&nbsp;across the world now expect to live track their deliveries. Services like food delivery, laundry pick up and delivery, grocery delivery, and couriers are booked with the tap of a button and the product is delivered&nbsp;by a rider&nbsp;who use an app to manage the deliveries.
      <br>
      <br>Live location of such riders can be useful to assign deliveries&nbsp;based on location, track the delivery, measure productivity, share location with customers for a better product experience and track miles for expense management. Delivery companies&nbsp;around the world and across industries use HyperTrack to build live location use cases.
      <br>
      <br>In this tutorial, we will talk about how to build:</div>
    <ul class="bullets">
      <li>
        <div class="bullet tutorial">Live order tracking <strong>widgets</strong> that integrate with your customer service and operations dashboards</div>
      </li>
      <li>
        <div class="bullet tutorial">Live order <strong>tracking experiences</strong> that integrate with your product experience</div>
      </li>
      <li>
        <div class="bullet tutorial"><strong>Location-based assignment</strong> of deliveries to nearest available rider</div>
      </li>
      <li>
        <div class="bullet tutorial"><strong>Mileage tracking</strong> for expense management and logging of routes traveled</div>
      </li>
    </ul>
  </div>
</div>
<div class="active">
  <div class="dasher">
    <div class="dashboard w-container">
      <div class="gothamheader">PREREQUISITE</div>
      <div class="explainer">Make sure you have plugged in the Android SDK into your rider&nbsp;app</div><a class="butt slim w-button" href="https://dashboard.hypertrack.com/onboarding/sdk-android">PLUG IN THE SDK</a>
      <div class="dashvideo" data-ix="scroll1"></div>
    </div>
  </div>
  <div>
    <div class="splasher w-container">
      <div class="gothamheader">IMPLEMENTATION</div>
      <div class="explainer">Follow this 6-step guide to get your use case implemented. We have implemented <span class="text-span-7"><a href="https://github.com/hypertrack/service-visit-example-android" target="_blank" class="link-7">an example app</a></span> using this tutorial. It's open-sourced - so go ahead and fork it, add to it, test it, and even use it as the base for your own thing!</div>
      <div class="explainer"></div>
      <div class="faqs w-clearfix">
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 1: Set user</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">The very first step is to set user in your app. This could be done when the rider&nbsp;logs in to the app.&nbsp;</div>
            <div class="embedblack w-embed"><pre class="prettyprint lang-java">
    /**
     * Call this method to attempt login. This method will create a User on HyperTrack Server
     * and configure the SDK using this generated UserId.
     */
    private void attemptDriverLogin() {{ '{' }}
        // Show Login Button loader
        loginBtnLoader.setVisibility(View.VISIBLE);
        // Get rider details, if provided
        final String name = driverNameText.getText().toString();
        final String phoneNumber = driverPhoneNumberText.getText().toString();
        // PhoneNumber is used as the lookup_id here but you can specify any other entity as the lookup_id.
        final String lookupId = phoneNumber;
        /**
         * Create a User on HyperTrack Server here to login your rider and configure HyperTrack SDK with
         * this generated HyperTrack UserId.
         * OR
         * Implement your API call for Driver Login and get back a HyperTrack UserId from your API Server
         * to be configured in the HyperTrack SDK.
         *
         * @NOTE:
         * Specify rider name, phone number and a lookup_id denoting your rider's internal id.
         * PhoneNumber is used as the lookup_id here but you can specify any other entity as the lookup_id.
         */
        HyperTrack.createUser(name, phoneNumber, lookupId, new HyperTrackCallback() {{ '{' }}
            @Override
            public void onSuccess(@NonNull SuccessResponse successResponse) {{ '{' }}
                // Hide Login Button loader
                loginBtnLoader.setVisibility(View.GONE);
                User user = (User) successResponse.getResponseObject();
                // Handle createUser success here, if required
                // HyperTrack SDK auto-configures UserId on createUser API call, so no need to call
                // HyperTrack.setUserId() API
                // On DriverLogin success
                onDriverLoginSuccess();
            }
            @Override
            public void onError(@NonNull ErrorResponse errorResponse) {{ '{' }}
                // Hide Login Button loader
                loginBtnLoader.setVisibility(View.GONE);
                Toast.makeText(LoginActivity.this, R.string.login_error_msg + " " + errorResponse.getErrorMessage(),
                        Toast.LENGTH_SHORT).show();
            }
        });
    }
</pre>
            </div>
          </div>
        </div>
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 2: Start tracking</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">To start tracking the rider, use the <span class="methodname">startTracking</span> method. Call this method when the rider logs in to the app. Alternatively, you can use AlarmManager to call this method at a predefined time, say at 7am everyday.</div>
            <div class="embedblack w-embed"><pre class="prettyprint lang-java">
    /**
     * Call this method when rider has successfully logged in
     */
    private void onDriverLoginSuccess() {{ '{' }}
        // To start tracking your rider, call HyperTrack's startTracking API
        HyperTrack.startTracking(new HyperTrackCallback() {{ '{' }}
            @Override
            public void onSuccess(@NonNull SuccessResponse successResponse) {{ '{' }}
                // Hide Login Button loader
                loginBtnLoader.setVisibility(View.GONE);
                // Handle startTracking API response
                SharedPreferenceStore.setDriverId(LoginActivity.this, HyperTrack.getUserId());
                Toast.makeText(LoginActivity.this, R.string.login_success_msg, Toast.LENGTH_SHORT).show();
                // Start Driver Session by starting MainActivity
                TaskStackBuilder.create(LoginActivity.this)
                        .addNextIntentWithParentStack(new Intent(LoginActivity.this, MainActivity.class)
                                .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                        .startActivities();
                finish();
            }
            @Override
            public void onError(@NonNull ErrorResponse errorResponse) {{ '{' }}
                // Hide Login Button loader
                loginBtnLoader.setVisibility(View.GONE);
                Toast.makeText(LoginActivity.this, R.string.login_error_msg + " " + errorResponse.getErrorMessage(),
                        Toast.LENGTH_SHORT).show();
            }
        });
    }
</pre>
            </div>
            <div class="answer tutorial">Keep the SDK on throughout the day. Don’t worry about the battery - our SDK uses only 5-10 mAh per hour of tracking .</div>
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test"><strong>Nice job!</strong> See live location of that rider&nbsp;on the HyperTrack dashboard</div>
              </a>
            </div><img class="image" sizes="(max-width: 479px) 80vw, (max-width: 991px) 100vw, 700px" [src]="images.step1">
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test">You can now use the nearest-N API&nbsp;to get available riders nearest (by time) to the expected location of delivery.</div>
              </a>
            </div>
            <div class="dashing margin w-embed">
              <video width="100%" height="100%" autoplay="" loop="">
                <source src="https://fat.gfycat.com/CompetentGratefulAlpineroadguidetigerbeetle.mp4" type="video/mp4">
              </video>
            </div>
          </div>
        </div>
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 3: Create &amp; assign delivery&nbsp;action</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">For every delivery order&nbsp;that you want to track, create and assign a <strong>Delivery</strong>&nbsp;action to the rider. Call <span class="methodname">createAndAssignAction</span> method when you assign the delivery to a rider. In case your workflow requires the rider&nbsp;to accept a delivery order, call the above method when the rider&nbsp;taps the ACCEPT button.
              <br>
              <br>Most developers want to additionally track the pickup associated with the order, if the order has to be picked up before getting delivered. To do so, create and assign a <strong>Pickup</strong>&nbsp;action to the rider.&nbsp;
              <br>
              <br>Use following parameters to build your Action object.</div>
            <div class="row-5 w-row">
              <div class="column w-col w-col-2 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Parameter</div>
              </div>
              <div class="column-2 w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Action #1 (Pickup)</div>
              </div>
              <div class="column-3 w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Action #2 (Delivery)</div>
              </div>
            </div>
            <div class="row-2 w-row">
              <div class="w-col w-col-2 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">expected_place</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">The Place object where the pickup action will be performed.</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">The Place object where the delivery&nbsp;action will be performed.</div>
              </div>
            </div>
            <div class="row-4 w-row">
              <div class="w-col w-col-2 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">type</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Pickup</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Delivery</div>
              </div>
            </div>
            <div class="row-3 w-row">
              <div class="w-col w-col-2 w-col-small-4 w-col-tiny-4">
                <div class="answer table">lookup_id</div>
              </div>
              <div class="w-col w-col-5 w-col-small-4 w-col-tiny-4">
                <div class="answer table">An id that you can specify based on your internal id of that order. This will help you search for the order&nbsp;on HyperTrack dashboard, and get custom views for the specific order.</div>
              </div>
              <div class="w-col w-col-5 w-col-small-4 w-col-tiny-4">
                <div class="answer table">Same as that for action #1</div>
              </div>
            </div>
            <div class="row-3 w-row">
              <div class="w-col w-col-2 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">scheduled_at</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">The scheduled time by when the rider&nbsp;is supposed to pickup the order.</div>
              </div>
              <div class="w-col w-col-5 w-col-medium-4 w-col-small-4 w-col-tiny-4">
                <div class="answer table">The scheduled time by when the rider&nbsp;is supposed to deliver&nbsp;the order.</div>
              </div>
            </div>
            <div class="embedblack w-embed">
              <div class="slide w-slide">
                <div class="testi">
                  <a class="nolink w-inline-block" data-ix="new-interaction">
                    <img class="popup" src="http://www.freeiconspng.com/uploads/copy-icon--3.png">
                  </a>
                </div>
              </div>
              <pre class="prettyprint lang-java">
 /**
     * This method creates and assigns PICKUP and DELIVERY actions to the current user on
     * HyperTrack API Server for the current order's orderID.
     *
     * @param orderID Internal order_id which maps to the current order being delivered
     */
    private void createActionsForJob(String orderID) {{ '{' }}
        /**
         * Construct a place object for Action's expected place
         *
         * @NOTE: Either the coordinates for the pickup location
         * or it's address can be used to construct the expected place for the Action
         */
        Place expectedPlace = new Place().setLocation(28.56217, 77.16160)
                .setAddress("HyperTrack, Vasant Vihar")
                .setName("HyperTrack");
        /**
         * Create ActionParams object specifying the Visit Action parameters including ExpectedPlace,
         * ExpectedAt time and Lookup_id.
         */
        ActionParams visitTypeActionParams = new ActionParamsBuilder()
                .setExpectedPlace(expectedPlace)
                .setExpectedAt(new Date())
                .setType(Action.ACTION_TYPE_VISIT)
                .setLookupId(orderID)
                .build();
        /**
         * Call createAndAssignAction to assign Visit action to the current user configured
         * in the SDK using the ActionParams created above.
         */
        HyperTrack.createAndAssignAction(visitTypeActionParams, new HyperTrackCallback() {{ '{' }}
            @Override
            public void onSuccess(@NonNull SuccessResponse response) {{ '{' }}
                // Handle createAndAssignAction API success here
                Action action = (Action) response.getResponseObject();
                SharedPreferenceStore.setVisitActionId(MainActivity.this, action.getId());
                /**
                 * The PICKUP Action just created has the tracking url which can be shared with your customers.
                 * This will enable the customer to live track the rider.
                 *
                 * @NOTE You can now share this tracking_url with your customers via an SMS
                 * or via your Customer app using in-app notifications.
                 */
                String trackingUrl = action.getTrackingURL();
                /**
                 * Yay! PICKUP Type Action has been successfully created and assigned to current user.
                 * Now, we need to createAndAssignAction for DELIVERY Type Action using the same lookup_id.
                 */
                assignStopoverActionForJob(action.getExpectedPlace().getId(), action.getLookupID());
            }
            @Override
            public void onError(@NonNull ErrorResponse errorResponse) {{ '{' }}
                if (mProgressDialog != null) {{ '{' }}
                    mProgressDialog.dismiss();
                }
                Toast.makeText(MainActivity.this, "Action assigned failed: " + errorResponse.getErrorMessage(),
                        Toast.LENGTH_SHORT).show();
            }
        });
    }
    /**
     * This method creates and assigns DELIVERY type action using given expectedPlaceId and lookup_id
     *
     * @param expectedPlaceID  ExpectedPlace Id created on HyperTrack API Server for the PICKUP type action.
     * @param lookupID         Internal order_id which maps to the current job being performed.
     */
    private void assignStopoverActionForJob(String expectedPlaceID, String lookupID) {{ '{' }}
        /**
         * Create ActionParams object specifying the DELIVERY Action parameters including
         * already created ExpectedPlaceId, ExpectedAt time and same Lookup_id as for the Visit type action.
         */
        ActionParams stopOverTypeActionParams = new ActionParamsBuilder()
                .setExpectedPlaceId(expectedPlaceID)
                .setExpectedAt(new Date())
                .setType(Action.ACTION_TYPE_STOPOVER)
                .setLookupId(lookupID)
                .build();
        /**
         * Call createAndAssignAction to assign DELIVERY action to the current user configured
         * in the SDK using the ActionParams created above.
         */
        HyperTrack.createAndAssignAction(stopOverTypeActionParams, new HyperTrackCallback() {{ '{' }}
            @Override
            public void onSuccess(@NonNull SuccessResponse response) {{ '{' }}
                if (mProgressDialog != null) {{ '{' }}
                    mProgressDialog.dismiss();
                }
                // Handle createAndAssignAction API success here
                Action action = (Action) response.getResponseObject();
                SharedPreferenceStore.setStopoverActionId(MainActivity.this, action.getId());
                Toast.makeText(MainActivity.this, "Job (id = " + action.getId() + ") accepted successfully.",
                        Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onError(@NonNull ErrorResponse errorResponse) {{ '{' }}
                if (mProgressDialog != null) {{ '{' }}
                    mProgressDialog.dismiss();
                }
                Toast.makeText(MainActivity.this, "Action assigned failed: " + errorResponse.getErrorMessage(),
                        Toast.LENGTH_SHORT).show();
            }
        });
    }
</pre>
            </div>
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test"><strong>Voila!</strong>&nbsp;You now have your live order&nbsp;tracking experience. Let your end customers live track this delivery&nbsp;using the trck.at URL that was generated for the delivery action.</div>
              </a>
            </div><img class="image" [src]="images.step2" width="250">
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test">You also have a tracking widget specific to the LookUp ID that integrates with your customer service and operations dashboards. Embed this URL to see it come alive: https://dashboard.hypertrack.com/widget/actions;lookup_id=&lt;LOOKUP_ID&gt;?key=&lt;YOUR_SECRET_KEY&gt;</div>
              </a>
            </div>
            <div class="image w-embed">
              <video width="100%" height="100%" autoplay="" loop="">
                <source src="https://fat.gfycat.com/AdorableWhiteHadrosaurus.mp4" type="video/mp4">
              </video>
            </div>
          </div>
        </div>
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 4: Complete delivery&nbsp;action</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">When the rider confirms that he/she has completed the pick-up&nbsp; (e.g., when he/she taps on PICKUP COMPLETE&nbsp;button), call the <span class="methodname">completeAction</span> method for the pickup&nbsp;action in our SDK.</div>
            <div class="embedblack w-embed"><pre class="prettyprint lang-java">
// Complete action using actionId for the PICKUP action that you created
HyperTrack.completeAction(visitActionId);
</pre>
            </div>
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test"><strong>Wohoo!</strong> You now have mileage tracking for this visit. Call the mileage API for the visit action to get accurate distance travelled by the service professional from the time of assignment to the time when he/she reached the service place.</div>
              </a>
            </div>
          </div>
        </div>
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 5: Complete delivery&nbsp;action</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">When the rider&nbsp;confirms that he/she has completed the delivery&nbsp;(e.g., when he/she taps on DELIVERED&nbsp;button), call the <span class="methodname">completeAction</span> method for the delivery&nbsp;action in our SDK.</div>
            <div class="embedblack w-embed"><pre class="prettyprint lang-java">
// Complete action using actionId for the DELIVERY action that you created
HyperTrack.completeAction(stopoverActionId));
</pre>
            </div>
            <div class="tutorialcheck">
              <a class="nolink w-inline-block" data-ix="new-interaction"><img class="testiperson" [src]="images.checkmark">
                <div class="answer faqq test"><strong>Nicely done!</strong>&nbsp;You have now logged the routes traveled by your riders. You can replay the entire order&nbsp;visit from assignment to the pickup to delivery&nbsp;any time in the future.</div>
              </a>
            </div>
          </div>
        </div>
        <div class="faq">
          <div class="q"><img class="arrow" [src]="images.arrow">
            <div class="jkhkhk question">Developer Evangelist</div>
            <div class="question">Step 6: Stop tracking</div>
          </div>
          <div class="reveal">
            <div class="answer tutorial">To stop tracking the rider, use the <span class="methodname">stopTracking </span>method. Call this method when the rider&nbsp;logs out of the app. Alternatively, you can use AlarmManager to call this method at a predefined time, say at 9pm everyday.</div>
            <div class="embedblack w-embed"><pre class="prettyprint lang-java">
//Stop tracking a user
HyperTrack.stopTracking();
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="dasher">
      <div class="dashboard w-container">
        <div class="gothamheader">RECAP</div>
        <div class="explainer">Yay! You just developed location tracking of your deliveries in Android. Let’s do a recap of what all you built in the process.</div>
        <ul class="bullets">
          <li>
            <div class="bullet tutorial"><strong>Live order&nbsp;tracking widgets that integrate with your customer service and operations dashboards</strong>
              <br>In your customer service dashboard, you would have a list of all orders. You now have a link that opens up a dashboard view for that order, and shows details of both the actions (pickup &amp; delivery) that you created for that order.&nbsp;To embed the widget, use the following URL:&nbsp;<span><span><span class="text-span-3">https://dasboard.hypertrack.com/widget/actions;lookup_id=&lt;LOOKUP_ID&gt;?key=&lt;YOUR_SECRET_KEY&gt;</span></span>
                </span>
            </div>
          </li>
          <li>
            <div class="bullet tutorial"><strong>Live order tracking experiences that integrate with your product experience</strong>
              <br>As soon as you create &amp; assign the delivery&nbsp;action to your rider, the API returns an unique <span class="text-span-4">trck.at</span> URL. Share this URL with your end customer (via text message or email) so that they can live track the rider&nbsp;and know their real time ETA. You can also embed a native tracking experience within your end customer app by following <span><a href="https://docs.hypertrack.com/v3/tutorials/consumer/android/installing.html" class="link-5">this guide</a></span>, or customize the web tracking experience by following this guide.</div>
          </li>
          <li>
            <div class="bullet tutorial"><strong>Location-based assignment of deliveries to nearest available rider</strong>
              <br>Use our <span><span class="text-span-5"><a href="https://docs.hypertrack.com/usecases/nearby.html" class="link-4"><span class="text-span-6">Nearest-N users API</span>
                </a>
                </span>
                </span> to get riders who are closest (by time) to the expected location of delivery/pickup.</div>
          </li>
          <li>
            <div class="bullet tutorial"><strong>Mileage tracking for expense management and logging of routes traveled</strong>
              <br>Call the <span><a href="https://docs.hypertrack.com/v3/tutorials/mileage.html" class="link-3">mileage API</a></span> for the delivery and visit actions to get accurate distance that was travelled by the rider from the time of assignment to the time when he/she reached the pickup and delivery locations. In case of customer complaints, visit HyperTrack dashboard and search for the order by searching for LookUp Id. Replay the entire journey of the rider from the time of assignment to time when he/she completed the pickup to time when he/she completed the delivery.</div>
          </li>
        </ul>
        <div class="dashvideo" data-ix="scroll1"></div>
      </div>
    </div>
  </div>
</div>
<div>
  <div class="footgreen greener">
    <div class="w-container">
      <div class="bottom"><img class="bottomtron" [src]="images.animatedGroup">
        <div class="gothamheader" data-ix="scroll1">How simple was that</div>
        <div class="ex2 explainer">Just a few steps and an hour, and you are now able to track live location of your deliveries.&nbsp;
          <br>
          <br>We are excited to see what live location feature you build in your product. Do ping us at help@hypertrack.io once you build one, and we would love to feature your app on our blog!</div>
      </div>
    </div>
  </div>
</div>
